<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header('Дашборд администратора')}">
<body>
<div th:replace="~{fragments/navigation}"></div>
<div class="container-fluid py-3 py-md-4" style="background-color: #f8f9fa;">
    <div class="container-fluid px-2 px-md-3">
        <!-- Заголовок -->
        <div class="d-flex flex-column flex-sm-row justify-content-between align-items-start align-items-sm-center mb-3 mb-md-4 gap-2">
            <h1 class="h3 h2-md mb-0">
                <i class="bi bi-speedometer2 text-success me-2"></i>
                Панель администратора
            </h1>
            <div>
                <span class="badge bg-dark fs-6 p-2" th:text="${#authentication.name}">admin</span>
            </div>
        </div>
        <!-- Карточки статистики - первый ряд -->
        <div class="row g-2 g-md-4 mb-3 mb-md-4">
            <div class="col-6 col-xl-3">
                <div class="card border-0 shadow-sm h-100 stats-card">
                    <div class="card-body p-2 p-md-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-muted text-uppercase small fw-semibold d-block" style="font-size: 0.7rem;">Всего пользователей</span>
                                <h3 class="mt-1 mt-md-2 mb-0 fw-bold h5 h3-md" th:text="${stats.totalUsers}">0</h3>
                            </div>
                            <div class="bg-success bg-opacity-10 p-2 p-md-3 rounded-circle">
                                <i class="bi bi-people text-success fs-5 fs-md-3"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-xl-3">
                <div class="card border-0 shadow-sm h-100 stats-card">
                    <div class="card-body p-2 p-md-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-muted text-uppercase small fw-semibold d-block" style="font-size: 0.7rem;">Создателей</span>
                                <h3 class="mt-1 mt-md-2 mb-0 fw-bold h5 h3-md" th:text="${stats.totalCreators}">0</h3>
                            </div>
                            <div class="bg-primary bg-opacity-10 p-2 p-md-3 rounded-circle">
                                <i class="bi bi-pencil-square text-primary fs-5 fs-md-3"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-xl-3">
                <div class="card border-0 shadow-sm h-100 stats-card">
                    <div class="card-body p-2 p-md-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-muted text-uppercase small fw-semibold d-block" style="font-size: 0.7rem;">Тестировщиков</span>
                                <h3 class="mt-1 mt-md-2 mb-0 fw-bold h5 h3-md" th:text="${stats.totalTesters}">0</h3>
                            </div>
                            <div class="bg-info bg-opacity-10 p-2 p-md-3 rounded-circle">
                                <i class="bi bi-person-check text-info fs-5 fs-md-3"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-xl-3">
                <div class="card border-0 shadow-sm h-100 stats-card">
                    <div class="card-body p-2 p-md-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-muted text-uppercase small fw-semibold d-block" style="font-size: 0.7rem;">Всего тестов</span>
                                <h3 class="mt-1 mt-md-2 mb-0 fw-bold h5 h3-md" th:text="${stats.totalTests}">0</h3>
                            </div>
                            <div class="bg-warning bg-opacity-10 p-2 p-md-3 rounded-circle">
                                <i class="bi bi-file-text text-warning fs-5 fs-md-3"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Второй ряд карточек -->
        <div class="row g-2 g-md-4 mb-3 mb-md-4">
            <div class="col-6 col-xl-3">
                <div class="card border-0 shadow-sm h-100 stats-card">
                    <div class="card-body p-2 p-md-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-muted text-uppercase small fw-semibold d-block" style="font-size: 0.7rem;">Прохождений</span>
                                <h3 class="mt-1 mt-md-2 mb-0 fw-bold h5 h3-md" th:text="${stats.totalAttempts}">0</h3>
                            </div>
                            <div class="bg-danger bg-opacity-10 p-2 p-md-3 rounded-circle">
                                <i class="bi bi-play-circle text-danger fs-5 fs-md-3"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6 col-xl-3">
                <div class="card border-0 shadow-sm h-100 stats-card">
                    <div class="card-body p-2 p-md-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-muted text-uppercase small fw-semibold d-block" style="font-size: 0.7rem;">Средний балл</span>
                                <h3 class="mt-1 mt-md-2 mb-0 fw-bold h5 h3-md" th:text="${stats.averageScore} + '%'">0%</h3>
                            </div>
                            <div class="bg-success bg-opacity-10 p-2 p-md-3 rounded-circle">
                                <i class="bi bi-star text-success fs-5 fs-md-3"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-xl-3">
                <div class="card border-0 shadow-sm h-100">
                    <div class="card-body d-flex align-items-center justify-content-center p-2 p-md-3">
                        <a th:href="@{/admin/statistics/export}" class="btn btn-outline-success w-100 btn-sm btn-md-normal">
                            <i class="bi bi-file-pdf me-2"></i>
                            <span class="d-none d-sm-inline">Экспорт статистики</span>
                            <span class="d-inline d-sm-none">Экспорт</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div th:replace="~{fragments/footer}"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>